<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AriaCoda: gripperExample.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AriaCoda
   &#160;<span id="projectnumber">cdf8a12_2021-05-11</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('gripperExample_8cpp-example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">gripperExample.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>Example program demonstrating use of the Pioneer gripper.Shows how to control the Pioneer 2DOF gripper accessory. In addition to the arrow keys to teleoperate the robot, Use the following keyboard keys to control it: u Lift the gripper up d Lift the gripper down o Open the gripper c Close the gripper s Stop gripper movement.</p>
<dl class="section see"><dt>See also</dt><dd>ArModeGripper (the gripper control mode used in the "demo" program)</dd></dl>
<div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">Adept MobileRobots Robotics Interface for Applications (ARIA)</span></div>
<div class="line"><span class="comment">Copyright (C) 2004-2005 ActivMedia Robotics LLC</span></div>
<div class="line"><span class="comment">Copyright (C) 2006-2010 MobileRobots Inc.</span></div>
<div class="line"><span class="comment">Copyright (C) 2011-2015 Adept Technology, Inc.</span></div>
<div class="line"><span class="comment">Copyright (C) 2016-2018 Omron Adept Technologies, Inc.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">     This program is free software; you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment">     it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><span class="comment">     the Free Software Foundation; either version 2 of the License, or</span></div>
<div class="line"><span class="comment">     (at your option) any later version.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">     This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment">     but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment">     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment">     GNU General Public License for more details.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">     You should have received a copy of the GNU General Public License</span></div>
<div class="line"><span class="comment">     along with this program; if not, write to the Free Software</span></div>
<div class="line"><span class="comment">     Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;Aria/Aria.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Adds robot callback to print gripper status.</span></div>
<div class="line"><span class="keyword">class </span>PrintGripStatus</div>
<div class="line">{</div>
<div class="line">  ArGripper* myGripper;</div>
<div class="line">  ArFunctorC&lt;PrintGripStatus&gt; myPrintCB;</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">  PrintGripStatus(ArGripper* gripper) : </div>
<div class="line">    myGripper(gripper),</div>
<div class="line">    myPrintCB(<span class="keyword">this</span>, &amp;PrintGripStatus::printStatus)</div>
<div class="line">  {</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> addRobotTask(ArRobot* robot)</div>
<div class="line">  {</div>
<div class="line">    robot-&gt;addUserTask(<span class="stringliteral">&quot;PrintGripStatus&quot;</span>, 10, &amp;myPrintCB);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> printStatus()</div>
<div class="line">  {</div>
<div class="line">    myGripper-&gt;logState();</div>
<div class="line">  }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Adds key handler callbacks for controlling the gripper</span></div>
<div class="line"><span class="keyword">class </span>GripperControlHandler</div>
<div class="line">{</div>
<div class="line">  ArGripper* myGripper;</div>
<div class="line">  ArFunctorC&lt;GripperControlHandler&gt; myUpCB;</div>
<div class="line">  ArFunctorC&lt;GripperControlHandler&gt; myDownCB;</div>
<div class="line">  ArFunctorC&lt;GripperControlHandler&gt; myOpenCB;</div>
<div class="line">  ArFunctorC&lt;GripperControlHandler&gt; myCloseCB;</div>
<div class="line">  ArFunctorC&lt;GripperControlHandler&gt; myStopCB;</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">  GripperControlHandler(ArGripper* gripper) : </div>
<div class="line">    myGripper(gripper),</div>
<div class="line">    myUpCB(this, &amp;GripperControlHandler::liftUp),</div>
<div class="line">    myDownCB(this, &amp;GripperControlHandler::liftDown),</div>
<div class="line">    myOpenCB(this, &amp;GripperControlHandler::open),</div>
<div class="line">    myCloseCB(this, &amp;GripperControlHandler::close),</div>
<div class="line">    myStopCB(this, &amp;GripperControlHandler::stop)</div>
<div class="line">  {</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> addKeyHandlers(ArRobot *robot)</div>
<div class="line">  {</div>
<div class="line">    ArKeyHandler *keyHandler = Aria::getKeyHandler();</div>
<div class="line">    <span class="keywordflow">if</span>(keyHandler == NULL)</div>
<div class="line">    {</div>
<div class="line">      keyHandler = <span class="keyword">new</span> ArKeyHandler();</div>
<div class="line">      Aria::setKeyHandler(keyHandler);</div>
<div class="line">      robot-&gt;attachKeyHandler(keyHandler);</div>
<div class="line">    }</div>
<div class="line">    keyHandler-&gt;addKeyHandler(ArKeyHandler::PAGEUP, &amp;myUpCB);</div>
<div class="line">    keyHandler-&gt;addKeyHandler(<span class="charliteral">&#39;u&#39;</span>, &amp;myUpCB);</div>
<div class="line">    keyHandler-&gt;addKeyHandler(ArKeyHandler::PAGEDOWN, &amp;myDownCB);</div>
<div class="line">    keyHandler-&gt;addKeyHandler(<span class="charliteral">&#39;d&#39;</span>, &amp;myDownCB);</div>
<div class="line">    keyHandler-&gt;addKeyHandler(<span class="charliteral">&#39;o&#39;</span>, &amp;myOpenCB);</div>
<div class="line">    keyHandler-&gt;addKeyHandler(<span class="charliteral">&#39;c&#39;</span>, &amp;myCloseCB);</div>
<div class="line">    keyHandler-&gt;addKeyHandler(<span class="charliteral">&#39;s&#39;</span>, &amp;myStopCB);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> liftUp()</div>
<div class="line">  {</div>
<div class="line">    ArLog::log(ArLog::Normal, <span class="stringliteral">&quot;Moving gripper lift up...&quot;</span>);</div>
<div class="line">    myGripper-&gt;liftUp();</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> liftDown()</div>
<div class="line">  {</div>
<div class="line">    ArLog::log(ArLog::Normal, <span class="stringliteral">&quot;Moving gripper lift down...&quot;</span>);</div>
<div class="line">    myGripper-&gt;liftDown();</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> stop()</div>
<div class="line">  {</div>
<div class="line">    ArLog::log(ArLog::Normal, <span class="stringliteral">&quot;Stopping gripper...&quot;</span>);</div>
<div class="line">    myGripper-&gt;gripperHalt(); <span class="comment">// stops both lift an grip</span></div>
<div class="line">    <span class="comment">//myGripper-&gt;liftStop(); // stops just the lift</span></div>
<div class="line">    <span class="comment">//myGripper-&gt;gripStop(); // stops just the gripper</span></div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> close()</div>
<div class="line">  {</div>
<div class="line">    ArLog::log(ArLog::Normal, <span class="stringliteral">&quot;Closing gripper...&quot;</span>);</div>
<div class="line">    myGripper-&gt;gripClose();</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> open()</div>
<div class="line">  {</div>
<div class="line">    ArLog::log(ArLog::Normal, <span class="stringliteral">&quot;Opening gripper...&quot;</span>);</div>
<div class="line">    myGripper-&gt;gripOpen();</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv) </div>
<div class="line">{</div>
<div class="line">  Aria::init();</div>
<div class="line">  ArArgumentParser parser(&amp;argc, argv);</div>
<div class="line">  parser.loadDefaultArguments();</div>
<div class="line">  ArRobot robot;</div>
<div class="line">  ArGripper gripper(&amp;robot);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Connect to the robot, get some initial data from it such as type and name,</span></div>
<div class="line">  <span class="comment">// and then load parameter files for this robot.</span></div>
<div class="line">  ArRobotConnector robotConnector(&amp;parser, &amp;robot);</div>
<div class="line">  <span class="keywordflow">if</span>(!robotConnector.connectRobot())</div>
<div class="line">  {</div>
<div class="line">    ArLog::log(ArLog::Terse, <span class="stringliteral">&quot;gripperExample: Could not connect to the robot.&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span>(parser.checkHelpAndWarnUnparsed())</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// -help not given</span></div>
<div class="line">        Aria::logOptions();</div>
<div class="line">        Aria::exit(1);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (!Aria::parseArgs() || !parser.checkHelpAndWarnUnparsed())</div>
<div class="line">  {</div>
<div class="line">    Aria::logOptions();</div>
<div class="line">    Aria::exit(1);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  ArLog::log(ArLog::Normal, <span class="stringliteral">&quot;gripperExample: Connected to robot.&quot;</span>);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  ArLog::log(ArLog::Normal, <span class="stringliteral">&quot;gripperExample: GripperType=%d&quot;</span>, gripper.getType());</div>
<div class="line">  gripper.logState();</div>
<div class="line">  <span class="keywordflow">if</span>(gripper.getType() == ArGripper::NOGRIPPER)</div>
<div class="line">  {</div>
<div class="line">    ArLog::log(ArLog::Terse, <span class="stringliteral">&quot;gripperExample: Error: Robot does not have a gripper. Exiting.&quot;</span>);</div>
<div class="line">    Aria::exit(-1);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Teleoperation actions with obstacle-collision avoidance</span></div>
<div class="line">  ArActionLimiterTableSensor tableLimit;</div>
<div class="line">  robot.addAction(&amp;tableLimit, 110);</div>
<div class="line">  ArActionLimiterForwards limitNearAction(<span class="stringliteral">&quot;near&quot;</span>, 300, 600, 250);</div>
<div class="line">  robot.addAction(&amp;limitNearAction, 100);</div>
<div class="line">  ArActionLimiterForwards limitFarAction(<span class="stringliteral">&quot;far&quot;</span>, 300, 1100, 400);</div>
<div class="line">  robot.addAction(&amp;limitFarAction, 90);</div>
<div class="line">  ArActionLimiterBackwards limitBackAction;</div>
<div class="line">  robot.addAction(&amp;limitBackAction, 50);</div>
<div class="line">  ArActionJoydrive joydriveAction(<span class="stringliteral">&quot;joydrive&quot;</span>, 400, 15);</div>
<div class="line">  robot.addAction(&amp;joydriveAction, 40);</div>
<div class="line">  joydriveAction.setStopIfNoButtonPressed(<span class="keyword">false</span>);</div>
<div class="line">  ArActionKeydrive keydriveAction;</div>
<div class="line">  robot.addAction(&amp;keydriveAction, 30);</div>
<div class="line">  </div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Handlers to control the gripper and print out info (classes defined above)</span></div>
<div class="line">  PrintGripStatus printStatus(&amp;gripper);</div>
<div class="line">  GripperControlHandler gripControl(&amp;gripper);</div>
<div class="line">  printStatus.addRobotTask(&amp;robot);</div>
<div class="line">  gripControl.addKeyHandlers(&amp;robot);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// enable motors and run (if we lose connection to the robot, exit)</span></div>
<div class="line">  ArLog::log(ArLog::Normal, <span class="stringliteral">&quot;You may now operate the robot with arrow keys or joystick. Operate the gripper with the u, d, o, c, and page up/page down keys.&quot;</span>);</div>
<div class="line">  robot.enableMotors();</div>
<div class="line">  robot.run(<span class="keyword">true</span>);</div>
<div class="line">  </div>
<div class="line">  Aria::exit(0);</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
