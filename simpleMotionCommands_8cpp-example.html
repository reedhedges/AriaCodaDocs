<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AriaCoda: simpleMotionCommands.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AriaCoda
   &#160;<span id="projectnumber">cdf8a12_2021-05-11</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('simpleMotionCommands_8cpp-example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">simpleMotionCommands.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>example showing how to connect and send basic motion commands to the robotARIA provides two levels of robot motion control, direct motion commands, and actions. This example shows direct motion commands. See actionExample.cpp, actionGroupExample.cpp, and others for examples on how to use actions. Actions provide a more modular way of performing more complex motion behaviors than the simple imperitive style used here. <br  />
</p>
<p>See the ArRobot class documentation, as well as the overview of robot motion, for more information.</p>
<p>WARNING: this program does no sensing or avoiding of obstacles, the robot WILL collide with any objects in the way! Make sure the robot has about 2-3 meters of free space around it before starting the program.</p>
<p>This program will work either with the MobileSim simulator or on a real robot's onboard computer. (Or use -remoteHost to connect to a wireless ethernet-serial bridge.)</p>
<div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">Adept MobileRobots Robotics Interface for Applications (ARIA)</span></div>
<div class="line"><span class="comment">Copyright (C) 2004-2005 ActivMedia Robotics LLC</span></div>
<div class="line"><span class="comment">Copyright (C) 2006-2010 MobileRobots Inc.</span></div>
<div class="line"><span class="comment">Copyright (C) 2011-2015 Adept Technology, Inc.</span></div>
<div class="line"><span class="comment">Copyright (C) 2016-2018 Omron Adept Technologies, Inc.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">     This program is free software; you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment">     it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><span class="comment">     the Free Software Foundation; either version 2 of the License, or</span></div>
<div class="line"><span class="comment">     (at your option) any later version.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">     This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment">     but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment">     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment">     GNU General Public License for more details.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">     You should have received a copy of the GNU General Public License</span></div>
<div class="line"><span class="comment">     along with this program; if not, write to the Free Software</span></div>
<div class="line"><span class="comment">     Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"><span class="preprocessor">#include &quot;Aria/Aria.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line">  Aria::init();</div>
<div class="line">  ArRobot robot;</div>
<div class="line">  ArArgumentParser parser(&amp;argc, argv);</div>
<div class="line">  parser.loadDefaultArguments();</div>
<div class="line"> </div>
<div class="line">  ArLog::log(ArLog::Terse, <span class="stringliteral">&quot;WARNING: this program does no sensing or avoiding of obstacles, the robot WILL collide with any objects in the way! Make sure the robot has approximately 3 meters of free space on all sides.&quot;</span>);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// ArRobotConnector connects to the robot, get some initial data from it such as type and name,</span></div>
<div class="line">  <span class="comment">// and then loads parameter files for this robot.</span></div>
<div class="line">  ArRobotConnector robotConnector(&amp;parser, &amp;robot);</div>
<div class="line">  <span class="keywordflow">if</span>(!robotConnector.connectRobot())</div>
<div class="line">  {</div>
<div class="line">    ArLog::log(ArLog::Terse, <span class="stringliteral">&quot;simpleMotionCommands: Could not connect to the robot.&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span>(parser.checkHelpAndWarnUnparsed())</div>
<div class="line">    {</div>
<div class="line">        Aria::logOptions();</div>
<div class="line">        Aria::exit(1);</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (!Aria::parseArgs())</div>
<div class="line">  {</div>
<div class="line">    Aria::logOptions();</div>
<div class="line">    Aria::exit(1);</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line">  </div>
<div class="line">  ArLog::log(ArLog::Normal, <span class="stringliteral">&quot;simpleMotionCommands: Connected.&quot;</span>);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Start the robot processing cycle running in the background.</span></div>
<div class="line">  <span class="comment">// True parameter means that if the connection is lost, then the </span></div>
<div class="line">  <span class="comment">// run loop ends.</span></div>
<div class="line">  robot.runAsync(<span class="keyword">true</span>);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Print out some data from the SIP.  </span></div>
<div class="line"> </div>
<div class="line">  <span class="comment">// We must &quot;lock&quot; the ArRobot object</span></div>
<div class="line">  <span class="comment">// before calling its methods, and &quot;unlock&quot; when done, to prevent conflicts</span></div>
<div class="line">  <span class="comment">// with the background thread started by the call to robot.runAsync() above.</span></div>
<div class="line">  <span class="comment">// See the section on threading in the manual for more about this.</span></div>
<div class="line">  <span class="comment">// Make sure you unlock before any sleep() call or any other code that will</span></div>
<div class="line">  <span class="comment">// take some time; if the robot remains locked during that time, then</span></div>
<div class="line">  <span class="comment">// ArRobot&#39;s background thread will be blocked and unable to communicate with</span></div>
<div class="line">  <span class="comment">// the robot, call tasks, etc.</span></div>
<div class="line">  </div>
<div class="line">  robot.lock();</div>
<div class="line">  ArLog::log(ArLog::Normal, <span class="stringliteral">&quot;simpleMotionCommands: Pose=(%.2f,%.2f,%.2f), Trans. Vel=%.2f, Rot. Vel=%.2f, Battery=%.2fV&quot;</span>,</div>
<div class="line">    robot.getX(), robot.getY(), robot.getTh(), robot.getVel(), robot.getRotVel(), robot.getBatteryVoltage());</div>
<div class="line">  robot.unlock();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Sleep for 3 seconds.</span></div>
<div class="line">  ArLog::log(ArLog::Normal, <span class="stringliteral">&quot;simpleMotionCommands: Will start driving in 3 seconds...&quot;</span>);</div>
<div class="line">  ArUtil::sleep(3000);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Set forward velocity to 50 mm/s</span></div>
<div class="line">  ArLog::log(ArLog::Normal, <span class="stringliteral">&quot;simpleMotionCommands: Driving forward at 250 mm/s for 5 sec...&quot;</span>);</div>
<div class="line">  robot.lock();</div>
<div class="line">  robot.enableMotors();</div>
<div class="line">  robot.setVel(250);</div>
<div class="line">  robot.unlock();</div>
<div class="line">  ArUtil::sleep(5000);</div>
<div class="line"> </div>
<div class="line">  ArLog::log(ArLog::Normal, <span class="stringliteral">&quot;simpleMotionCommands: Stopping.&quot;</span>);</div>
<div class="line">  robot.lock();</div>
<div class="line">  robot.stop();</div>
<div class="line">  robot.unlock();</div>
<div class="line">  ArUtil::sleep(1000);</div>
<div class="line"> </div>
<div class="line">  ArLog::log(ArLog::Normal, <span class="stringliteral">&quot;simpleMotionCommands: Rotating at 10 deg/s for 5 sec...&quot;</span>);</div>
<div class="line">  robot.lock();</div>
<div class="line">  robot.setRotVel(10);</div>
<div class="line">  robot.unlock();</div>
<div class="line">  ArUtil::sleep(5000);</div>
<div class="line"> </div>
<div class="line">  ArLog::log(ArLog::Normal, <span class="stringliteral">&quot;simpleMotionCommands: Rotating at -10 deg/s for 10 sec...&quot;</span>);</div>
<div class="line">  robot.lock();</div>
<div class="line">  robot.setRotVel(-10);</div>
<div class="line">  robot.unlock();</div>
<div class="line">  ArUtil::sleep(10000);</div>
<div class="line"> </div>
<div class="line">  ArLog::log(ArLog::Normal, <span class="stringliteral">&quot;simpleMotionCommands: Driving forward at 150 mm/s for 5 sec...&quot;</span>);</div>
<div class="line">  robot.lock();</div>
<div class="line">  robot.setRotVel(0);</div>
<div class="line">  robot.setVel(150);</div>
<div class="line">  robot.unlock();</div>
<div class="line">  ArUtil::sleep(5000);</div>
<div class="line"> </div>
<div class="line">  ArLog::log(ArLog::Normal, <span class="stringliteral">&quot;simpleMotionCommands: Stopping.&quot;</span>);</div>
<div class="line">  robot.lock();</div>
<div class="line">  robot.stop();</div>
<div class="line">  robot.unlock();</div>
<div class="line">  ArUtil::sleep(1000);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Other motion command functions include move(), setHeading(),</span></div>
<div class="line">  <span class="comment">// setDeltaHeading().  You can also adjust acceleration and deceleration</span></div>
<div class="line">  <span class="comment">// values used by the robot with setAccel(), setDecel(), setRotAccel(),</span></div>
<div class="line">  <span class="comment">// setRotDecel().  See the ArRobot class documentation for more.</span></div>
<div class="line"> </div>
<div class="line">  </div>
<div class="line">  robot.lock();</div>
<div class="line">  ArLog::log(ArLog::Normal, <span class="stringliteral">&quot;simpleMotionCommands: Pose=(%.2f,%.2f,%.2f), Trans. Vel=%.2f, Rot. Vel=%.2f, Battery=%.2fV&quot;</span>,</div>
<div class="line">    robot.getX(), robot.getY(), robot.getTh(), robot.getVel(), robot.getRotVel(), robot.getBatteryVoltage());</div>
<div class="line">  robot.unlock();</div>
<div class="line"> </div>
<div class="line">  </div>
<div class="line">  ArLog::log(ArLog::Normal, <span class="stringliteral">&quot;simpleMotionCommands: Ending robot thread...&quot;</span>);</div>
<div class="line">  robot.stopRunning();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// wait for the thread to stop</span></div>
<div class="line">  robot.waitForRunExit();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// exit</span></div>
<div class="line">  ArLog::log(ArLog::Normal, <span class="stringliteral">&quot;simpleMotionCommands: Exiting.&quot;</span>);</div>
<div class="line">  Aria::exit(0);</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
